(()=>{var b=t=>Array.from(new Array(Math.ceil(t.length/2)),(p,e)=>{let n=t.slice(e*2,e*2+2);return{s1:n[0],s2:n[1]}}),u=(t,p)=>{let{experiment:e,participant:{sounds:n}}=t,o=n.split(","),i=o.length/2,c=e.blockCount*e.trialsPerBlock-i,h=b(o,2),s=initJsPsych({on_finish:function(){s.data.displayData()}}),a=[];if(i===0)a.push({type:jsPsychHtmlKeyboardResponse,stimulus:"<h3>Exp\xE9rience d\xE9j\xE0 effectu\xE9e</h3>",choices:"NO_KEYS"});else{c==0?a.push({type:jsPsychHtmlKeyboardResponse,stimulus:`<p>${e.introduction}</p>`,prompt:"<p><span class='strong'>[espace]</span> pour continuer</p>",choices:" "}):a.push({type:jsPsychHtmlKeyboardResponse,stimulus:"<p>Reprise de l'exp\xE9rience</p>",prompt:"<p><span class='strong'>[espace]</span> pour continuer</p>",choices:" "});let m={timeline:[{type:jsPsychHtmlKeyboardResponse,stimulus:"<p>Nous vous proposons une pause de quelques secondes.</p>",prompt:"",choices:"NO_KEYS",trial_duration:6e3},{type:jsPsychHtmlKeyboardResponse,stimulus:"<p>La pause est termin\xE9e. Vous pouvez reprendre l'exp\xE9rience.</p>",prompt:"<p><span class='strong'>[espace]</span> pour continuer</p>",choices:" "}],conditional_function:function(){return(s.data.get().filter({answered:!0}).count()+c)%e.trialsPerBlock==0}};a.push({prompt:`<p>[espace] <span style='font-weight:bold'>\xE9coute ${e.trialSoundLabel} 1 & 2</span></p>
            <p>${e.trialQuestion}</p>
            <div class='choice'>
                <div>[f] ${e.trialSoundLabel} 1</div>
                <div>${e.trialSoundLabel} 2 [j]</div>
            </div>`,timeline:[{type:jsPsychPreload,audio:()=>{""+s.timelineVariable("s1"),""+s.timelineVariable("s2")},show_detailed_errors:!0},{type:jsPsychHtmlKeyboardResponse,stimulus:"",choices:" ",prompt:`<p><span style='font-weight:bold'>[espace]</span> \xE9coute ${e.trialSoundLabel} 1 & 2</p>
                    <p>${e.trialQuestion}</p>
                    <div class='choice'>
                        <div>[f] ${e.trialSoundLabel} 1</div>
                        <div>${e.trialSoundLabel} 2 [j]</div>
                    </div>`},{type:jsPsychAudioKeyboardResponse,stimulus:()=>`sounds/${s.timelineVariable("s1")}`,choices:"NO_KEYS",trial_ends_after_audio:!0,response_allowed_while_playing:!1},{type:jsPsychHtmlKeyboardResponse,stimulus:"",choices:"NO_KEYS",trial_duration:500},{type:jsPsychAudioKeyboardResponse,stimulus:()=>`sounds/${s.timelineVariable("s2")}`,choices:"NO_KEYS",trial_ends_after_audio:!0,response_allowed_while_playing:!1},{type:jsPsychHtmlKeyboardResponse,stimulus:"",choices:["f","j"],prompt:`<p>[espace] \xE9coute ${e.trialSoundLabel} 1 & 2</p>
                    <p>${e.trialQuestion}</p>
                    <div class='choice'>
                        <div><span class='strong'>[f]</span> ${e.trialSoundLabel} 1</div>
                        <div>${e.trialSoundLabel} 2 <span class='strong'>[j]</span></div>
                    </div>`,data:{answered:!0},on_finish:l=>{let d=l.response==="f"?s.timelineVariable("s1"):s.timelineVariable("s2"),y=l.response==="f"?s.timelineVariable("s2"):s.timelineVariable("s1");p.send(JSON.stringify({kind:"result",payload:JSON.stringify({chosen:d,dismissed:y})}))}},m],timeline_variables:h}),a.push({type:jsPsychHtmlKeyboardResponse,stimulus:"<h3>Fin de l'exp\xE9rience</h3>",prompt:"<p>Merci pour votre participation/p>",choices:"NO_KEYS",on_start:function(){console.log("The experiment is over")}})}s.run(a)};var f=t=>{try{return JSON.parse(t)}catch(p){console.error(p)}},_=()=>{console.log("[revcor] version 0.1");let t=window.location.protocol==="https:"?"wss":"ws",e=/(.*)xp/.exec(window.location.pathname)[1],n=`${t}://${window.location.host}${e}ws`,o=new WebSocket(n);o.onopen=()=>{let{experimentId:i,participantId:r}=window.state;o.send(JSON.stringify({kind:"join",payload:JSON.stringify({experimentId:i,participantId:r})}))},o.onmessage=async i=>{let r=f(i.data);r.kind==="init"&&u(r.payload,o)}};document.addEventListener("DOMContentLoaded",_);})();
